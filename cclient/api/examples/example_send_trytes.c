/*
 * Copyright (c) 2019 IOTA Stiftung
 * https://github.com/iotaledger/entangled
 *
 * Refer to the LICENSE file for licensing information
 */

#include "cclient/api/examples/cclient_examples.h"

static tryte_t const *const SEND_1K_HASH1 = (tryte_t *)
    "GKNSMEKQODVBIWRIDZVX9OLBIZDQOKR9DY9UJZSH9FILYHAAJSVLVATHTUIUQVWRYPIJPQDWJUJVL9RBCKZPVPLGEKFOTMGNJJGFCOQLPDJCFZGCMH"
    "LHJBKMIFDTTACWGWY9LHPSOTXX9LBHQZAQPLOYYI9NLSNBOBSHBLJXWPWZRUQARJV9QXCBHBPXMUIOSNWONVYLTH9AEJXCEUTJZIASMRETZMAFNGRK"
    "JHMOZDUM9XIJZNZAMPNUQKCLNDLRPIT9JQGSQBSJL9DUBFYMWM9ZXNAYR9SKFTBARJZHZPWVSICPAOUPTMHHEGTCVLKSMZYBWWYUFQVZHGAMQMNLPE"
    "BPCMVJWCEJLOCQGHXAMWMQRLARGEBUPIOOILEHBJMHGJLSZFOWC9XDFZXDWVITAECVARTCFQMMH9ZEVO9UBQUGESHTQOIJ99HDUQWCKCDGYPSYDLV9"
    "THTHD9PCXYJTNXGWNBLCQBRZMUUBXWVSMVDMHDFXXLQVSUNXQIDFRPAOWZDBOQTMZAOFSPCWMAKMBXONF9EVRQAWYOZSLRZQZKCAZRYRDHDAA9ZAUE"
    "FETLGELAZXZJP9IUMUZQ9POJEAEJZUUARRDCXUPSIDHHZUYBV9HHBW9DASXPTYBGPSGGMB9WJSJIABPXDUYLLISVJ9WDFKTKWTJPJDNXIQQEJKJJIW"
    "HXAMUDNWIUZVOYEHUFYWFCIFCEGT9LOEVXVMDZHMUWOAWOYGFPPJOHCXWO9EWR9BMDYQXNRNIGENIGOEQZVUE9A9XRNCPAWQ9ZBHWFSQYCBSNQ9AXG"
    "SZXNTXPUOFFWMPVS9HTQHGJYLPNVARXGH9ZQA9ICAMIGCFHXEIBRBBQXUVBTSA9LT9IIWWUTY9SYHNMLENBAVZLVVCMZC9RUIATPCQJQQOEAAPWGBJ"
    "MJTZ9POWTKBMRZGNXRDJBSUBJFXCVQLOJRBFCLGZIUBIWPOVIDSGOITGCBZYPFXGUJXRDHCJHNUKLYGGOVSKRV9YJJLUBDDAGNUFTLDOIOGWQXFOYP"
    "HSJXVUX9QTPPEUWRTHAYQEZMJQBM9WUELAVZPMCFSFQIXOPLHLADUGFTU9GXGOIGSV9SRYRL9ZMPFEUUJAEPWJE9ZLZ9QELOVVEMNGQJPIW9YRAHXU"
    "LRYXRF9PQALIMNIWGKTEJTGPCJUWFGMZOPURPZFKNJQCHWEYBXKTLNYPXVYJEDMMJCSTSRYRLBCA9MZHKYDGZPCXVFHJYJVAQFCO9HABUUPZT9FXOE"
    "OBCSXTYUABTVSNTEQXDLREZSIVDLJXMZDKIBBEDSYCMBZOCZAJFRUNNPWSA9KUYAE9HDSMXTIMGQRBEKIOEEIWCVZECRUAMBVUAHBAHZMCHFBGVSIA"
    "ROVXJKFDCMSWDNM9LMMMDHRRZKRHYWMQSJPEOE9TTDYFAWUEITOQRLUQNIDJOWKSKRHISKZPH9Y99DJQRRVPQNHVP9K9DJTTNLBKCFMEZPFWRTABWP"
    "ZPALTBQNJWQMVPQAHYUOZUCXKXIKMNOTLQROWFHHZOJMSYIEMURGHVCGZII9EWRYPWTOF9ANIINUN9BLUVKGFDYMJLFERDBHIBRMORPRQORXPHISEX"
    "OLVGPTYMRGHLXCNJJKMUMTKWAPOYI9LCDYB9LFRDLEZWYMUKQEJXIYTMRVEQEPEPIXSBYXXOTUC9AQUMOXYDXFMCGZHWK9IBAZLMVBLEWYYLMOVBPN"
    "WSZJGRPOGHQXRWZPYUDVCLI9ITVTLVTIEOKJKQCRZGIZREDTPSFOLBHPGNT9QKXDXQJRVLNW9BJ9QCJYZZPMITKF9OTUFUEA9VUHNDULQBP99SGSPN"
    "OTRNIWTJMUBPY9KRJGEIJREAYCSLILUBEHBFRTDUHWJSXU9LBMMHGKUZNZ9EVHMSSZQSRJCJMKV9BNIEXPXAPJR9MCOSSK9UFPBWPJKJYLHFWIUUWZ"
    "AESBGDWFMPHPELELWVQG9SLQSHEGFRSEOT9AKNPTPMYSNBSKGUJTVEVOPZCVSIJVTQLIHAONAEGPIWXLANYIARDPOECZPHAOAIJHFUOWMEWQQGGSMI"
    "YRQBKFLLMFP9ZSJMW9BKQLSUOATUIPLZYQTFCFNNSNWKEJRMTTQIFWLTWGLJBBPPBUGKASKKFZVZKZXBLMHYLGFXRMLWYVJQOILMYZBHKUS9EZMGVG"
    "QHWXSVJEKAQVFLUIB9IP9LQZYGHAQLJLENO9IBSFOFIYHIBKOHEWVAEHKYOED9WBERCCLGGLOJVIZSIUUXGJ9WONIGBXKTVAWUXNHW999999999999"
    "999999999999999OOPS99999999999999999999999CAAZW9D99B99999999B99999999J9ZJXNHQVYKYPFUCPBPNDK9KDFDIGMFLZN9I9EV9XOWIY"
    "KEVE9LUSFXQLGBQBNHJPLU9ULJ9ZVR9HFOFW999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999OOPS99999999999999999999999999"
    "999999999999999999999999999999999999999999999999999";

static tryte_t const *const SEND_1K_HASH2 = (tryte_t *)
    "HZDCM9A9FT9USJFMDHODIEHWJPRLPMLFCJAPGVFUQOUIRKMPKUFZZYKLAZADT9DNXGSKWAEBCORORGOBW9GKXKELATELGJYXBBFDTCGVRHJXXUVSJX"
    "CMSHAELPTTZFBBHIUD9GHWGTQZDWR9HTVBCVILCKJUKAKMBX9XNY9TCFLOOWJZLRXHSKRVDUBPLY9RVMXBVLREIPYGINMQRHHDQCEZHTXQYWJX9ORY"
    "RYVZHRVTGTJ9XIAYSGA9FGFVUUSKVYWMTVFOABPFRYHLOVONNF9RKDLIJAHM9URWEKKWURNPZQNIGNRN9QBSLJTNWRNYQIGXHKXNI9VTMXKOMWFPBG"
    "YGBJ9DRMCDOBCXMUDLSWTW9LJFADJDZCTRZKJFDLOLKVJQKFDTCHNY9PCZUTNOAFSEKNPZMAUIECFRYFQRMTMNKGBLBAPVX9RIWRTHBIEZVXVJUMRV"
    "SPSW9MIQ9AQ9JVHGNI9CMIBOREULZXHTKZIVNHBOR9ZCPHQJSYFNRTYTDYO9STHXVXSWLAVAAAUJEZAJALWRJBWOQB99CSAUZAMWHHETQHYKIEZUVY"
    "YURFCTJ9DEW9ZXZUOKXVJJZRWRTZILWWVEKU9TEZMPFZEVLK9IZCRZLLWAKOCQZPRSDNAKNWO99JZCZWAOQESVDYWQIEU9AOGXAMYLUDMLN9FYM9NZ"
    "JJWWOXIATMMHBCQHZHSARGGGKQLHDKCQSIFSTZVSIILF9UBMPRBJBGO9NRPHMOSYTSPDMPFLFKDZCZRHQFSTQASJJHYXHHBFXL9NRXBQLOWXHAGXNW"
    "VXGKARLJCVUXVHUNMMDUBO9OUNSDEQLYRUDYZNVFNVUOWABFPXVRREQHFCVBLNNBOPMDDXJOH9IDHUVSQFTUAIYHROUWBRFFCJCFMBTFXJUKBVDJI9"
    "RWIPPLSTBSGMMNKYAVBHMIJLCTJ9VDFNNUCKAWHQUWGCQCQKCCXHDWWXKPICZAWOYEPKJTIKJXSEGCRJNSQPBKJCSTARTKHLDITSERBMZAPPQEBGAW"
    "KLLCPAMMVAS9SRPSGPGLJXHRFBWGEFNQ9IYBZLRBMAKMYTIWMSDLRPULTGDV9OPVNY9DJZCPUETNIHKDZ9TVJUWOENUYW9HMYDGVLCIPYVYWTADOFC"
    "AFJELGCPBD9BEORSKPTFFTSNQRZSOZ9XST9LTQXJSROMUWKSHDZ9GHVIHTULDVTCGCWBJZMTGF9YDZXPYAGNOXUURXIFN99GYQIHNJDZLUNUPNILNU"
    "QVLAHEURDMN9IIHIFFGGBLMETSWMUYTTSJUWBCOLDDCKYYLYZMNLCCJRVWHPQQPNMAYLWAACVSZYNUCAAZEBHUILY9POSMJHTNKACEOQPOQYCKYMOF"
    "MIXMDLIECPOHJCONDEWRNURJHCXINKQCBFZMDONSQHHEIRDLZSEDVHIGVCJQVU9M9WAFVSZTHJBVZGGPTMSAIRJOOWTGJEEENBSUDHGDBGIQBASTAI"
    "OHCBBMSOIPJZMAOODLMBTVOHPJJJJTQHMLHUPILNUICTCT9DJRUHFBHI9MEIJOAXNKRTPMCPJFLYTVQRESYLJKPPOKURJWAAKVZQBT9ZJRBYJNZIWR"
    "RCQX9EGZZIXFCQ9ZOTHCFYOYZIGLCSKHOFUWGYCUASFP9XXFZXSUMIELOFFMBVLZMV9MXFDGUOWYKDTBOLRTUFSMVPQ9PDCBSBHCWEQBCBNYKNUNKH"
    "PHQX9CTTNYZKXCQMHGDXWKFVVQGKHEXL9MSEGEZGRSTPZGZJSD9YMSVMLGDMLPOLB9DGT9XASFPSPNQNRCMREKX9JECYZST999JCBLHFX9KHIMOMKM"
    "HBKENADVTROC9WBFCNXFYUIHQBZHLPYHZOUYGQBBQZPJUEOLYDXVMFJOTFQPZFZQPQVIKDJOFNBSBOQJMYZWJNAKMEIHBVGWOAFYJJFKWECSDOGBKF"
    "FKVNCZTODQWSQJKJZVHHTMGCWYSANL9FXHUXEQNFFHVVBSAZRECGYHMPUSKXEVOR9EXSAVCJARYVUZVKRKCDGVDYEMIOFSOYYXBBWGLH9ESJYMFBCC"
    "JETZDT9FNUH9YYXOPVPTRQOUBWZMGSDJT9BAGXONELIZVQBGCDLNQBBAVZUXBJPYBIGRACTKQYTYSGCPPMZOINCKFCGBTUTVXVGWFMLOMQOF9XGLYT"
    "TKNWLPMTPQKXLMFQQVWB9LQZYGHAQLJLENO9IBSFOFIYHIBKOHEWVAEHKYOED9WBERCCLGGLOJVIZSIUUXGJ9WONIGBXKTVAWUXNHWZQZ999999999"
    "999999999999999OOPS99999999999999999999999CAAZW9D99A99999999B99999999J9ZJXNHQVYKYPFUCPBPNDK9KDFDIGMFLZN9I9EV9XOWIY"
    "KEVE9LUSFXQLGBQBNHJPLU9ULJ9ZVR9HFOFW999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999OOPS99999999999999999999999999"
    "999999999999999999999999999999999999999999999999999";

static tryte_t const *const SEND_1K_HASH3 = (tryte_t *)
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999PNRMSXRHPOFXERGZCCIOHBLXLCSROQXJINLUNDNLTKEMIISBYN9GWFOE9M9YOACEYCZA9NGAMMMFUHBADAJA999999999"
    "999999999999999FQPS99999999999999999999999BAAZW9D99999999999B99999999J9ZJXNHQVYKYPFUCPBPNDK9KDFDIGMFLZN9I9EV9XOWIY"
    "KEVE9LUSFXQLGBQBNHJPLU9ULJ9ZVR9HFOFW999999999999999999999999999999999999999999999999999999999999999999999999999999"
    "999999999999999999999999999999999999999999999999999999999999999999999999999999999999OOPS99999999999999999999999999"
    "999999999999999999999999999999999999999999999999999";

void example_send_trytes(iota_client_service_t *s) {
  printf("\n[%s]\n", __FUNCTION__);
  retcode_t ret_code = RC_OK;
  flex_trit_t trits_8019[FLEX_TRIT_SIZE_8019];
  transaction_array_t *out_tx_objs = transaction_array_new();
  hash8019_array_p raw_trytes = hash8019_array_new();

  if (!out_tx_objs || !raw_trytes) {
    printf("Error: OOM\n");
    goto done;
  }

  if (flex_trits_from_trytes(trits_8019, NUM_TRITS_SERIALIZED_TRANSACTION, SEND_1K_HASH1,
                             NUM_TRYTES_SERIALIZED_TRANSACTION, NUM_TRYTES_SERIALIZED_TRANSACTION) == 0) {
    printf("Error: converting flex_trit failed.\n");
    goto done;
  }
  hash_array_push(raw_trytes, trits_8019);

  if (flex_trits_from_trytes(trits_8019, NUM_TRITS_SERIALIZED_TRANSACTION, SEND_1K_HASH2,
                             NUM_TRYTES_SERIALIZED_TRANSACTION, NUM_TRYTES_SERIALIZED_TRANSACTION) == 0) {
    printf("Error: converting flex_trit failed.\n");
    goto done;
  }
  hash_array_push(raw_trytes, trits_8019);

  if (flex_trits_from_trytes(trits_8019, NUM_TRITS_SERIALIZED_TRANSACTION, SEND_1K_HASH3,
                             NUM_TRYTES_SERIALIZED_TRANSACTION, NUM_TRYTES_SERIALIZED_TRANSACTION) == 0) {
    printf("Error: converting flex_trit failed.\n");
    goto done;
  }
  hash_array_push(raw_trytes, trits_8019);

  if ((ret_code = iota_client_send_trytes(s, raw_trytes, 6, 9, NULL, false, out_tx_objs)) == RC_OK) {
    printf("trytes have been sent\n");
#ifdef DEBUG
    iota_transaction_t *tx_obj = NULL;
    TX_OBJS_FOREACH(out_tx_objs, tx_obj) { transaction_obj_dump(tx_obj); }
#endif
  } else {
    printf("Error: %s\n", error_2_string(ret_code));
  }

done:
  transaction_array_free(out_tx_objs);
  hash_array_free(raw_trytes);
}
